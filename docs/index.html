<!DOCTYPE html>

<html>

<head>
  <title>ESP8266</title>
  <link rel="stylesheet" type="text/css" href="spartan.css">
  <link rel="stylesheet" type="text/css" href="local.css">
  <script type="module">
    import * as spartan from './spartan.js'

    spartan.route('temperature', async () => {
      /*
        This is where you would insert fetch() to call your API.
           let response = await fetch('/temperature');
           let temperature = await response.text();
        But for purposes of the demo, temperature is hardcoded.
      */
      let temperature = 32
      document.getElementById('content').innerHTML = `Temperature is: ${temperature}&deg;`
    })

    spartan.route('humidity', async () => {
      // Again, value is hardcoded for demo purposes.
      let humidity = 57
      document.getElementById('content').innerHTML = `Humidity is: ${humidity}%`
    })

    spartan.route('gpio2', async () => {
      /* Hardcoded for demo */
      let ledState = 'ON'
      document.getElementById('content').innerHTML = `Built-In LED is: ${ledState}`
    })

    spartan.run()
  </script>

</head>

<body>
  <header>
    <h1>
      <svg id="menu-btn" style="height: 1em; width: 1em; vertical-align: middle;" viewbox="0 0 24 24">
        <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
      </svg>
      ESP8266
    </h1>
  </header>

  <nav id="menu">
    <a href="/">Home</a>
    <details>
      <summary>DHT22</summary>
      <a href="#temperature">Temperature</a>
      <a href="#humidity">Humidity</a>
    </details>
    <details>
      <summary>GPIO</summary>
      <a href="#gpio2">Built-In LED</a>
    </details>
  </nav>

  <main id="content">
    <p>Welcome to the microcontroller lab!</p>
  </main>

  <footer>
    <p>We don't use cookies, but if we did they'd be chocolate chip.</p>
  </footer>

</body>

</html>
